## test for semi-sigma
c=c(1,2,3,4,5)
mean(c)
sum((c-mean(c))^2)
var(c)
SemiVariance(c)
library(PerformanceAnalytics)
SemiVariance(c)
SemiVariance(-c)
## test for semi-sigma
c=c(1,2,3,4,6)
SemiVariance(-c)
SemiVariance(c)
is.na(NA)
readAndInfo = function(index_return,index_div,country){
setwd(paste('C:/Users/User/Desktop/waterloo/actsc 970/final project/Data/',toString(country),sep=''))
N=length(index_return)
## read for returns
data_return = as.list(rep(NA,N))
for (i in 1:N) {
tdata = read.csv(paste(toString(index_return[i]),'.csv',sep=''))[,c(1,6)]
ti = as.Date(tdata[,1])
tdata = xts(tdata[,2],order.by = ti)
tdata = as.numeric(tdata)
for (j in 1:length(tdata)){ #deal with NA: take average
if(is.na(tdata[j])){
tdata[j] = (tdata[j-1]+tdata[j+1])/2
}
}
for(k in length(tdata):2){
tdata[k] = tdata[k]/tdata[k-1]-1
}
tdata = xts(tdata[-1],order.by = ti[-1])
data_return[[i]] = tdata
}
## read for dividents
data_div = as.list(rep(NA,N))
for (i in 1:N) {
if (is.na(index_div[i])){
data_div[[i]] = 0
}else{
data_div[[i]] = read.csv(paste(toString(index_div[i]),'_dividend_train.csv',sep=''))[,2]
}
}
data = list('return' = data_return,'div' = data_div)
return(data)
}
index2 = c(NA,'AEP','BA',NA,'CBSH','DUK','EL',NA,'FDX','GS','HD','JNJ','JPM','KO','LFC','MCD',
'MDLZ','MSFT','NKE','PG','PTR','RIO','SNP','WMT','XOM',NA)
length(index2)
data = readAndInfo(index,index2,'American')
library(xts)
data = readAndInfo(index,index2,'American')
exit()
library(xts)
library(PerformanceAnalytics)
index = c('AAPL','AEP','BA','BIDU','CBSH','DUK','EL','F','FDX','GS','HD','JNJ','JPM','KO','LFC','MCD',
'MDLZ','MSFT','NKE','PG','PTR','RIO','SNP','WMT','XOM','ZNH')
index2 = c(NA,'AEP','BA',NA,'CBSH','DUK','EL',NA,'FDX','GS','HD','JNJ','JPM','KO','LFC','MCD',
'MDLZ','MSFT','NKE','PG','PTR','RIO','SNP','WMT','XOM',NA)
data = readAndInfo(index,index2,'American')
data$div
### to read in-sample data
readInsample = function(index_return,index_div,country){
setwd(paste('C:/Users/User/Desktop/waterloo/actsc 970/final project/Data/',toString(country),sep=''))
N=length(index_return)
## read for returns
data_return = as.list(rep(NA,N))
for (i in 1:N) {
tdata = read.csv(paste(toString(index_return[i]),'.csv',sep=''))[,c(1,6)]
ti = as.Date(tdata[,1])
tdata = xts(tdata[,2],order.by = ti)
tdata = as.numeric(tdata)
for (j in 1:length(tdata)){ #deal with NA: take average
if(is.na(tdata[j])){
tdata[j] = (tdata[j-1]+tdata[j+1])/2
}
}
for(k in length(tdata):2){
tdata[k] = tdata[k]/tdata[k-1]-1
}
tdata = xts(tdata[-1],order.by = ti[-1])
data_return[[i]] = tdata
}
## read for dividents
data_div = as.list(rep(NA,N))
for (i in 1:N) {
if (is.na(index_div[i])){
data_div[[i]] = 0
}else{
data_div[[i]] = read.csv(paste(toString(index_div[i]),'_dividend_train.csv',sep=''))[,2]
}
}
data = list('return' = data_return,'div' = data_div)
return(data)
}
returns = data$return
div = data$div
## compute bar_ri
r = c()
for (i in 1:26){
Period = length(returns[[i]])
r[i] = mean(returns[[i]])-sum(div[[i]])/Period
}
r
for (i in 1:26){
Period = length(returns[[i]])
r[i] = mean(returns[[i]])+sum(div[[i]])/Period
}
r
